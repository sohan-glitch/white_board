<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Whiteboard</title>
<style>
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100vh;
        background-color: #f1f1f1;
        font-family: Arial, sans-serif;
    }
    canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background-color: white;
        cursor: crosshair;
    }
    /* Toolbar base */
    .toolbar {
        position: fixed;
        bottom: 15px;
        left: 15px;
        display: flex;
        align-items: center;
        transition: all 0.3s ease;
    }
    .toolbox {
        display: none;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 8px;
        padding: 10px;
        flex-direction: row;
        align-items: center;
        gap: 10px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    .toolbar.expanded .toolbox {
        display: flex;
    }
    /* Toggle button */
    .toggle-btn {
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 50%;
        width: 45px;
        height: 45px;
        font-size: 20px;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0,0,0,0.3);
        transition: background 0.3s ease;
    }
    .toggle-btn:hover {
        background-color: #0056b3;
    }
    /* Buttons & Inputs */
    button, input[type="color"], input[type="range"] {
        cursor: pointer;
    }
    button {
        padding: 6px 10px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background: #f8f8f8;
    }
    button:hover {
        background: #e0e0e0;
    }
    label {
        font-size: 12px;
        color: #333;
        margin-right: 5px;
    }
</style>
</head>
<body>

<canvas id="whiteboard"></canvas>

<div class="toolbar" id="toolbar">
    <button class="toggle-btn" id="toggleMenu">‚¨Ü</button>
    <div class="toolbox" id="toolbox">
        <div>
            <label>Pen</label>
            <input type="color" id="colorPicker" value="#000000">
        </div>
        <div>
            <label>BG</label>
            <input type="color" id="bgColorPicker" value="#ffffff">
        </div>
        <div>
            <label>Pen Size</label>
            <input type="range" id="penSize" min="1" max="50" value="5">
        </div>
        <div>
            <label>Eraser Size</label>
            <input type="range" id="eraserSize" min="5" max="100" value="30">
        </div>
        <button id="eraseBtn">üßΩ Erase</button>
        <button id="undoBtn">‚Ü©Ô∏è</button>
        <button id="redoBtn">‚Ü™Ô∏è</button>
    </div>
</div>

<script>
const canvas = document.getElementById('whiteboard');
const ctx = canvas.getContext('2d');
const toolbox = document.getElementById('toolbox');
const toolbar = document.getElementById('toolbar');
const toggleMenu = document.getElementById('toggleMenu');

let drawing = false;
let eraseMode = false;
let history = [];
let undone = [];
let currentColor = '#000000';
let bgColor = '#ffffff';
let penSize = 5;
let eraserSize = 30;
let lastX = 0;
let lastY = 0;

// Set canvas size
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Initialize background
ctx.fillStyle = bgColor;
ctx.fillRect(0, 0, canvas.width, canvas.height);

// Draw function
function draw(e) {
    if (!drawing) return;
    if (eraseMode) {
        ctx.clearRect(e.offsetX - eraserSize / 2, e.offsetY - eraserSize / 2, eraserSize, eraserSize);
    } else {
        ctx.strokeStyle = currentColor;
        ctx.lineWidth = penSize;
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(e.offsetX, e.offsetY);
        ctx.stroke();
        ctx.closePath();
    }
    [lastX, lastY] = [e.offsetX, e.offsetY];
}

// Save canvas state
function saveState() {
    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
    history.push(imageData);
    if (history.length > 20) history.shift();
}

// Undo
document.getElementById('undoBtn').addEventListener('click', () => {
    if (history.length > 0) {
        const last = history.pop();
        undone.push(last);
        redrawCanvas();
    }
});

// Redo
document.getElementById('redoBtn').addEventListener('click', () => {
    if (undone.length > 0) {
        const state = undone.pop();
        history.push(state);
        ctx.putImageData(state, 0, 0);
    }
});

// Redraw
function redrawCanvas() {
    ctx.fillStyle = bgColor;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    if (history.length > 0) {
        ctx.putImageData(history[history.length - 1], 0, 0);
    }
}

// Event listeners
canvas.addEventListener('mousedown', e => {
    drawing = true;
    [lastX, lastY] = [e.offsetX, e.offsetY];
});
canvas.addEventListener('mousemove', draw);
canvas.addEventListener('mouseup', () => {
    drawing = false;
    saveState();
});
canvas.addEventListener('mouseout', () => drawing = false);

// Toggle menu
toggleMenu.addEventListener('click', () => {
    toolbar.classList.toggle('expanded');
    toggleMenu.textContent = toolbar.classList.contains('expanded') ? '‚¨á' : '‚¨Ü';
});

// Color pickers
document.getElementById('colorPicker').addEventListener('input', e => currentColor = e.target.value);
document.getElementById('bgColorPicker').addEventListener('input', e => {
    bgColor = e.target.value;
    redrawCanvas();
});

// Size controls
document.getElementById('penSize').addEventListener('input', e => penSize = e.target.value);
document.getElementById('eraserSize').addEventListener('input', e => eraserSize = e.target.value);

// Eraser
document.getElementById('eraseBtn').addEventListener('click', () => {
    eraseMode = !eraseMode;
    document.getElementById('eraseBtn').style.background = eraseMode ? '#ffcccc' : '';
});

</script>

</body>
</html>
